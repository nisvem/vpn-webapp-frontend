"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("react"),r=(e=t)&&"object"==typeof e&&"default"in e?e.default:e,n=t.createContext({});function a(e){var a=e.children,u=e.validateHash,i=t.useState(!1),s=i[0],c=i[1],p=t.useState(!1),l=p[0],d=p[1],f={get app(){var e;return null==(e=window.Telegram)?void 0:e.WebApp},startParam:t.useRef(new URLSearchParams(window.location.search).get("tgWebAppStartParam")).current,isReady:s};return t.useEffect((function(){if(s&&!l)throw new Error("Invalid hash")}),[s,l]),r.createElement(o,{onLoad:function(){var e=u(f.app.initData);e instanceof Promise?e.then(d).finally((function(){return c(!0)})):(d(e),c(!0))}},r.createElement(n.Provider,{value:f},a))}function o(e){var r=e.children,n=e.onLoad;return t.useEffect((function(){var e=document.createElement("script");return e.src="https://telegram.org/js/telegram-web-app.js",e.onload=n,document.head.appendChild(e),window.__TELEGRAM_WEB_APP_SCRIPT_INJECTED__=!0,function(){document.head.removeChild(e),window.__TELEGRAM_WEB_APP_SCRIPT_INJECTED__=!1}}),[]),r}exports.TelegramWebApp=a,exports.TelegramWebAppContext=n,exports.useIsTelegramWebAppReady=function(){return t.useContext(n).isReady},exports.useStartParam=function(){return t.useContext(n).startParam},exports.useTelegramWebApp=function(){return t.useContext(n).app},exports.withTelegramWebApp=function(e,t){return function(n){return r.createElement(a,Object.assign({},t),r.createElement(e,Object.assign({},n)))}};
//# sourceMappingURL=react-telegram-webapp.cjs.production.min.js.map
